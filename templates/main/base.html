<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}IRCC - Immigration, Réfugiés et Citoyenneté Canada{% endblock %}</title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="{% block meta_description %}Service officiel d'immigration au Canada. Demandez votre visa, permis de travail, résidence permanente et citoyenneté canadienne. Assistance complète pour votre immigration au Canada.{% endblock %}"
    />
    <meta
      name="keywords"
      content="immigration canada, visa canada, permis travail canada, résidence permanente, citoyenneté canadienne, IRCC, immigration express entry"
    />
    <meta
      name="author"
      content="IRCC - Immigration, Réfugiés et Citoyenneté Canada"
    />
    <meta name="robots" content="{% block meta_robots %}index, follow{% endblock %}" />
    <link rel="canonical" href="{% block canonical_url %}{{ canonical_url|default:request.build_absolute_uri }}{% endblock %}" />

    <!-- Open Graph Meta Tags pour le partage sur les réseaux sociaux -->
    <meta
      property="og:title"
      content="{% block og_title %}IRCC - Immigration, Réfugiés et Citoyenneté Canada{% endblock %}"
    />
    <meta
      property="og:description"
      content="{% block og_description %}Service officiel d'immigration au Canada. Demandez votre visa, permis de travail, résidence permanente et citoyenneté canadienne.{% endblock %}"
    />
    <meta
      property="og:image"
      content="{% block og_image %}{{ og_image_absolute }}{% endblock %}"
    />
    <meta
      property="og:url"
      content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}"
    />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="IRCC - Immigration Canada" />
    <meta property="og:locale" content="fr_CA" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="{% block twitter_title %}IRCC - Immigration, Réfugiés et Citoyenneté Canada{% endblock %}"
    />
    <meta
      name="twitter:description"
      content="{% block twitter_description %}Service officiel d'immigration au Canada. Demandez votre visa, permis de travail, résidence permanente et citoyenneté canadienne.{% endblock %}"
    />
    <meta
      name="twitter:image"
      content="{% block twitter_image %}{{ og_image_absolute }}{% endblock %}"
    />

    <!-- Données structurées JSON-LD (SEO) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "@id": "{{ site_base_url }}/#organization",
          "name": "IMIGATUS / IRCC - Immigration Canada",
          "url": "{{ site_base_url }}",
          "logo": "{{ logo_absolute }}",
          "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "availableLanguage": "French"
          }
        },
        {
          "@type": "WebSite",
          "name": "IMIGATUS - Immigration Canada",
          "url": "{{ site_base_url }}",
          "description": "Service d'accompagnement à l'immigration au Canada. Visa, permis de travail, résidence permanente.",
          "inLanguage": "fr-CA",
          "publisher": { "@id": "{{ site_base_url }}/#organization" }
        }
      ]
    }
    </script>

    <!-- Favicon (feuille d'érable Canada) -->
    <link
      rel="icon"
      type="image/jpeg"
      href="https://drjob.ca/wp-content/uploads/2024/05/canada-leaf-600nw-589189172.jpg"
    />
    <link
      rel="shortcut icon"
      type="image/jpeg"
      href="https://drjob.ca/wp-content/uploads/2024/05/canada-leaf-600nw-589189172.jpg"
    />
    <link
      rel="apple-touch-icon"
      href="https://drjob.ca/wp-content/uploads/2024/05/canada-leaf-600nw-589189172.jpg"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        /* Couleurs officielles IRCC Canada */
        --ircc-blue-dark: #1b365d; /* Bleu sombre IRCC */
        --ircc-blue-matte: #2c5f7c; /* Bleu mat IRCC */
        --ircc-blue-light: #4a90a4; /* Bleu clair IRCC */
        --ircc-red: #d32f2f; /* Rouge accent IRCC */
        --ircc-white: #ffffff; /* Blanc */
        --ircc-grey: #6c757d; /* Gris IRCC */
        --ircc-light: #f8f9fa; /* Gris très clair */
        --ircc-gold: #ffc107; /* Or pour accents */
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        line-height: 1.6;
        color: var(--ircc-blue-dark);
        background-color: var(--ircc-light);
      }

      .navbar {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-dark) 0%,
          var(--ircc-blue-matte) 100%
        );
        box-shadow: 0 2px 15px rgba(27, 54, 93, 0.2);
        padding: 1rem 0;
        border-bottom: 3px solid var(--ircc-white);
      }

      .navbar-brand {
        font-weight: 700;
        font-size: 1.8rem;
        color: white !important;
        text-decoration: none;
        font-family: "Roboto", "Inter", "Helvetica Neue", Arial, sans-serif;
        letter-spacing: 2px;
        text-transform: uppercase;
      }

      .navbar-brand img {
        height: 50px !important;
        width: auto;
      }

      /* Logo plus grand sur écrans moyens et grands */
      @media (min-width: 769px) {
        .navbar-brand img {
          height: 55px !important;
        }
      }

      @media (min-width: 1200px) {
        .navbar-brand img {
          height: 60px !important;
        }
      }

      .navbar-brand-text {
        font-weight: 900;
        font-size: 1.6rem;
        letter-spacing: 3px;
      }

      .navbar-nav .nav-link {
        color: white !important;
        font-weight: 500;
        margin: 0 0.5rem;
        transition: all 0.3s ease;
      }

      .navbar-nav .nav-link:hover {
        color: var(--ircc-gold) !important;
        transform: translateY(-2px);
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-matte) 0%,
          var(--ircc-blue-dark) 100%
        );
        border: 2px solid var(--ircc-white);
        border-radius: 8px;
        padding: 12px 30px;
        font-weight: 600;
        transition: all 0.3s ease;
        color: var(--ircc-white);
        box-shadow: 0 2px 8px rgba(44, 95, 124, 0.3);
      }

      .btn-primary:hover {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-dark) 0%,
          var(--ircc-blue-light) 100%
        );
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(44, 95, 124, 0.4);
        border-color: var(--ircc-white);
        color: var(--ircc-white);
      }

      .btn-outline-primary {
        border: 2px solid var(--ircc-blue-matte);
        color: var(--ircc-blue-matte);
        border-radius: 8px;
        padding: 10px 25px;
        font-weight: 600;
        transition: all 0.3s ease;
        background: transparent;
      }

      .btn-outline-primary:hover {
        background-color: var(--ircc-blue-matte);
        color: var(--ircc-white);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(44, 95, 124, 0.3);
      }

      .hero-section {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-dark) 0%,
          var(--ircc-blue-matte) 100%
        );
        color: var(--ircc-white);
        padding: 80px 0;
        position: relative;
        overflow: hidden;
        border-bottom: 5px solid var(--ircc-white);
      }

      .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="maple" patternUnits="userSpaceOnUse" width="20" height="20"><path d="M10,2 C8,2 6,4 6,6 C6,8 8,10 10,12 C12,10 14,8 14,6 C14,4 12,2 10,2 Z" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23maple)"/></svg>');
        opacity: 0.1;
        pointer-events: none;
      }

      .hero-content {
        position: relative;
        z-index: 2;
      }

      .card {
        border: 2px solid var(--ircc-white);
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(44, 95, 124, 0.1);
        transition: all 0.3s ease;
        background: var(--ircc-white);
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(44, 95, 124, 0.2);
        border-color: var(--ircc-blue-matte);
      }

      .form-control {
        border-radius: 10px;
        border: 2px solid #e9ecef;
        padding: 12px 15px;
        transition: all 0.3s ease;
      }

      .form-control:focus {
        border-color: var(--ircc-blue-matte);
        box-shadow: 0 0 0 0.2rem rgba(44, 95, 124, 0.25);
      }

      .footer {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-dark) 0%,
          var(--ircc-blue-matte) 100%
        );
        color: var(--ircc-white);
        padding: 40px 0 20px;
        border-top: 3px solid var(--ircc-red);
      }

      .footer a {
        color: var(--ircc-gold);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .footer a:hover {
        color: var(--ircc-white);
      }
      .footer-logo {
        height: 50px;
        max-width: 140px;
        object-fit: contain;
      }
      .mobile-sidebar-logo {
        height: 32px;
        max-width: 90px;
        object-fit: contain;
      }

      .video-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 9999;
        display: none;
        align-items: center;
        justify-content: center;
      }

      .video-container {
        position: relative;
        max-width: 80%;
        max-height: 80%;
        margin: 0 auto;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }

      .video-container video {
        width: 100%;
        height: auto;
        max-height: 70vh;
        border-radius: 10px;
        display: block;
      }

      .video-close {
        position: absolute;
        top: -40px;
        right: 0;
        background: var(--ircc-red);
        color: var(--ircc-white);
        border: 2px solid var(--ircc-white);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .video-close:hover {
        background: #b71c1c;
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(211, 47, 47, 0.4);
      }

      .alert {
        border-radius: 10px;
        border: none;
      }

      /* Styles pour les images publicitaires */
      .ad-banner {
        background: var(--ircc-white);
        border: 2px solid var(--ircc-blue-light);
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
        box-shadow: 0 5px 15px rgba(44, 95, 124, 0.1);
      }

      .ad-banner img {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
      }

      .ad-banner h4 {
        color: var(--ircc-blue-dark);
        margin-top: 15px;
        font-weight: 600;
      }

      .ad-banner p {
        color: var(--ircc-grey);
        margin-bottom: 0;
      }

      /* Styles pour les membres de l'équipe */
      .team-member {
        background: var(--ircc-white);
        border: 2px solid var(--ircc-blue-light);
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        margin: 20px 0;
        box-shadow: 0 8px 25px rgba(44, 95, 124, 0.1);
        transition: all 0.3s ease;
      }

      .team-member:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(44, 95, 124, 0.2);
        border-color: var(--ircc-blue-matte);
      }

      .team-member img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--ircc-blue-light);
        margin-bottom: 20px;
      }

      .team-member h5 {
        color: var(--ircc-blue-dark);
        font-weight: 600;
        margin-bottom: 10px;
      }

      .team-member .position {
        color: var(--ircc-blue-matte);
        font-weight: 500;
        margin-bottom: 15px;
      }

      .team-member .description {
        color: var(--ircc-grey);
        font-size: 0.9rem;
        line-height: 1.5;
      }

      /* Section procédure */
      .procedure-section {
        background: var(--ircc-white);
        border: 2px solid var(--ircc-blue-light);
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
        box-shadow: 0 8px 25px rgba(44, 95, 124, 0.1);
      }

      .procedure-step {
        background: var(--ircc-light);
        border-left: 4px solid var(--ircc-blue-matte);
        padding: 20px;
        margin: 20px 0;
        border-radius: 0 8px 8px 0;
      }

      .procedure-step h4 {
        color: var(--ircc-blue-dark);
        margin-bottom: 15px;
      }

      .procedure-step p {
        color: var(--ircc-grey);
        margin-bottom: 10px;
      }

      /* Styles pour les bannières publicitaires de produits */
      .product-ad {
        background: var(--ircc-white);
        border: 2px solid var(--ircc-blue-light);
        border-radius: 15px;
        padding: 25px;
        margin: 30px 0;
        text-align: center;
        box-shadow: 0 8px 25px rgba(44, 95, 124, 0.1);
        transition: all 0.3s ease;
      }

      .product-ad:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(44, 95, 124, 0.2);
        border-color: var(--ircc-blue-matte);
      }

      .product-ad img {
        max-width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 20px;
        border: 3px solid var(--ircc-blue-light);
      }

      .product-ad h4 {
        color: var(--ircc-blue-dark);
        font-weight: 600;
        margin-bottom: 15px;
      }

      .product-ad p {
        color: var(--ircc-grey);
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .product-ad .btn {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-matte) 0%,
          var(--ircc-blue-dark) 100%
        );
        border: none;
        color: var(--ircc-white);
        padding: 10px 25px;
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .product-ad .btn:hover {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-dark) 0%,
          var(--ircc-blue-light) 100%
        );
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(44, 95, 124, 0.3);
      }

      /* Bannière publicitaire horizontale */
      .horizontal-ad {
        background: linear-gradient(
          135deg,
          var(--ircc-blue-light) 0%,
          var(--ircc-blue-matte) 100%
        );
        border-radius: 15px;
        padding: 30px;
        margin: 40px 0;
        color: var(--ircc-white);
        text-align: center;
        box-shadow: 0 10px 30px rgba(44, 95, 124, 0.2);
      }

      .horizontal-ad h3 {
        color: var(--ircc-white);
        font-weight: 700;
        margin-bottom: 15px;
      }

      .horizontal-ad p {
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 20px;
        font-size: 1.1rem;
      }

      .horizontal-ad img {
        max-width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 10px;
        margin: 20px 0;
        border: 3px solid var(--ircc-white);
      }

      .alert-success {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        color: #155724;
      }

      .alert-danger {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        color: #721c24;
      }

      @media (max-width: 768px) {
        .hero-section {
          padding: 30px 0;
        }

        .navbar-brand {
          font-size: 1.3rem;
        }

        .btn-primary,
        .btn-outline-primary {
          width: 100%;
          margin-bottom: 10px;
          padding: 10px 20px;
          font-size: 0.9rem;
        }

        .container {
          padding-left: 10px;
          padding-right: 10px;
        }

        .process-section .container {
          padding-left: 20px !important;
          padding-right: 20px !important;
        }

        .process-section .row {
          margin-left: -10px;
          margin-right: -10px;
        }

        .process-section [class*="col-"] {
          padding-left: 15px !important;
          padding-right: 15px !important;
        }

        .card {
          margin-bottom: 15px;
        }

        .card-body {
          padding: 20px 15px;
        }

        .display-4 {
          font-size: 2rem;
        }

        .display-5 {
          font-size: 1.8rem;
        }

        .display-6 {
          font-size: 1.5rem;
        }

        .lead {
          font-size: 1rem;
        }

        .form-control {
          padding: 10px 12px;
          font-size: 16px;
        }

        .btn-lg {
          padding: 12px 20px;
          font-size: 1rem;
        }

        .py-5 {
          padding-top: 2rem !important;
          padding-bottom: 2rem !important;
        }

        .mb-4 {
          margin-bottom: 1rem !important;
        }

        .mb-5 {
          margin-bottom: 1.5rem !important;
        }

        .p-5 {
          padding: 1.5rem !important;
        }

        .p-4 {
          padding: 1rem !important;
        }

        .g-4 > * {
          margin-bottom: 1rem;
        }

        .step-number {
          width: 50px !important;
          height: 50px !important;
          font-size: 1.2rem !important;
        }

        .fa-3x {
          font-size: 2rem !important;
        }

        .fa-4x {
          font-size: 2.5rem !important;
        }
      }

      @media (max-width: 480px) {
        .hero-section {
          padding: 20px 0;
        }

        .container {
          padding-left: 5px;
          padding-right: 5px;
        }

        .process-section .container {
          padding-left: 18px !important;
          padding-right: 18px !important;
        }

        .process-section [class*="col-"] {
          padding-left: 12px !important;
          padding-right: 12px !important;
        }

        .card-body {
          padding: 15px 10px;
        }

        .display-4 {
          font-size: 1.8rem;
        }

        .display-5 {
          font-size: 1.5rem;
        }

        .display-6 {
          font-size: 1.3rem;
        }

        .btn-lg {
          padding: 10px 15px;
          font-size: 0.9rem;
        }

        .form-control {
          padding: 8px 10px;
          font-size: 16px;
        }

        .py-5 {
          padding-top: 1.5rem !important;
          padding-bottom: 1.5rem !important;
        }

        .p-5 {
          padding: 1rem !important;
        }

        .p-4 {
          padding: 0.8rem !important;
        }

        .step-number {
          width: 40px !important;
          height: 40px !important;
          font-size: 1rem !important;
        }

        .fa-3x {
          font-size: 1.8rem !important;
        }

        .fa-4x {
          font-size: 2rem !important;
        }
      }

      .loading {
        display: none;
      }

      .loading.show {
        display: block;
      }

      /* Menu latéral mobile */
      .mobile-sidebar {
        position: fixed;
        top: 0;
        left: -300px;
        width: 280px;
        height: 100vh;
        background: linear-gradient(
          135deg,
          var(--ircc-blue-dark) 0%,
          var(--ircc-blue-matte) 100%
        );
        z-index: 10000;
        transition: left 0.3s ease;
        box-shadow: 2px 0 15px rgba(27, 54, 93, 0.3);
        overflow-y: auto;
        border-right: 3px solid var(--ircc-white);
      }

      .mobile-sidebar.open {
        left: 0;
      }

      .mobile-sidebar-header {
        padding: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        text-align: center;
      }

      .mobile-sidebar-header h5 {
        color: var(--ircc-white);
        margin: 0;
        font-weight: 600;
      }

      .mobile-sidebar-header p {
        color: rgba(255, 255, 255, 0.8);
        margin: 5px 0 0 0;
        font-size: 0.85rem;
      }

      .mobile-sidebar-nav {
        padding: 20px 0;
      }

      .mobile-sidebar-nav .nav-link {
        color: var(--ircc-white) !important;
        padding: 15px 25px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        font-weight: 500;
      }

      .mobile-sidebar-nav .nav-link:hover {
        background: rgba(255, 255, 255, 0.15);
        color: var(--ircc-gold) !important;
        padding-left: 35px;
        border-left: 4px solid var(--ircc-white);
      }

      .mobile-sidebar-nav .nav-link i {
        margin-right: 15px;
        width: 20px;
        text-align: center;
        color: var(--ircc-white);
      }

      .mobile-sidebar-nav .nav-link:hover i {
        color: var(--ircc-gold);
      }

      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .sidebar-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        padding: 10px;
        cursor: pointer;
      }

      @media (max-width: 768px) {
        .navbar {
          position: sticky;
          top: 0;
          z-index: 1030;
        }
        .mobile-menu-toggle {
          display: block;
        }

        .navbar-nav {
          display: none !important;
        }

        .navbar-toggler {
          display: none !important;
        }

        .navbar-brand-text {
          display: none !important;
        }

        .navbar-brand {
          font-size: 1.2rem;
        }

        .navbar-brand img {
          height: 36px !important;
        }

        .video-container {
          max-width: 95%;
          max-height: 85%;
          padding: 15px;
          margin: 10px auto;
        }

        .video-container video {
          max-height: 60vh;
        }

        .video-close {
          top: -30px;
          right: 5px;
          width: 35px;
          height: 35px;
          font-size: 18px;
        }
      }

      /* Optimisations mobiles supplémentaires */
      @media (max-width: 768px) {
        .row {
          margin-left: -5px;
          margin-right: -5px;
        }

        .col-md-4,
        .col-md-6,
        .col-lg-4,
        .col-lg-6,
        .col-lg-8,
        .col-lg-10 {
          padding-left: 5px;
          padding-right: 5px;
        }

        .shadow-lg {
          box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
        }

        .border-0 {
          border: 1px solid #dee2e6 !important;
        }

        .text-center {
          text-align: left !important;
        }

        .d-flex.flex-column.flex-sm-row {
          flex-direction: column !important;
        }

        .d-flex.flex-column.flex-sm-row .btn {
          margin-bottom: 10px;
        }

        .hero-image {
          display: none;
        }

        .hero-content {
          text-align: center;
        }

        .process-step {
          margin-bottom: 2rem;
        }

        .info-card {
          margin-bottom: 1.5rem;
        }
      }

      @media (max-width: 480px) {
        .row {
          margin-left: -2px;
          margin-right: -2px;
        }

        .col-md-4,
        .col-md-6,
        .col-lg-4,
        .col-lg-6,
        .col-lg-8,
        .col-lg-10 {
          padding-left: 2px;
          padding-right: 2px;
        }

        .navbar {
          padding: 0.5rem 0;
        }

        .navbar-nav {
          text-align: center;
        }

        .navbar-nav .nav-link {
          padding: 0.5rem 0;
          margin: 0;
        }
      }
    </style>

    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <button class="mobile-menu-toggle" onclick="toggleSidebar()">
          <i class="fas fa-bars"></i>
        </button>

        <a class="navbar-brand" href="{% url 'home' %}">
          {% load static %}
          <img
            src="{% static 'images/logo_institution.png' %}"
            alt="IRCC - Immigration Canadienne"
            height="45"
            class="d-inline-block align-middle"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';"
          />
          <i class="fas fa-maple-leaf" style="display: none"></i>
        </a>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'home' %}">Accueil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'services' %}">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'passport_checker' %}">Vérifier Passeport</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'visa_checker' %}">Vérifier Visa</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'application_form' %}"
                >Candidature</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'about' %}">À Propos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'procedure' %}">Procédure</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'contact' %}">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Menu latéral mobile -->
    <div class="mobile-sidebar" id="mobileSidebar">
      <div class="mobile-sidebar-header">
        <img src="{% static 'images/logo_institution.png' %}" alt="Immigration Canadienne" class="mobile-sidebar-logo mb-2" />
        <p class="text-white-50 small mb-0">
          Immigration, Réfugiés et Citoyenneté Canada
        </p>
      </div>
      <nav class="mobile-sidebar-nav">
        <a class="nav-link" href="{% url 'home' %}" onclick="closeSidebar()">
          <i class="fas fa-home"></i>Accueil
        </a>
        <a
          class="nav-link"
          href="{% url 'services' %}"
          onclick="closeSidebar()"
        >
          <i class="fas fa-cogs"></i>Services
        </a>
        <a class="nav-link" href="{% url 'passport_checker' %}" onclick="closeSidebar()">
          <i class="fas fa-passport"></i>Vérifier Passeport
        </a>
        <a class="nav-link" href="{% url 'visa_checker' %}" onclick="closeSidebar()">
          <i class="fas fa-stamp"></i>Vérifier Visa
        </a>
        <a
          class="nav-link"
          href="{% url 'application_form' %}"
          onclick="closeSidebar()"
        >
          <i class="fas fa-file-alt"></i>Candidature
        </a>
        <a class="nav-link" href="{% url 'about' %}" onclick="closeSidebar()">
          <i class="fas fa-info-circle"></i>À Propos
        </a>
        <a
          class="nav-link"
          href="{% url 'procedure' %}"
          onclick="closeSidebar()"
        >
          <i class="fas fa-list-alt"></i>Procédure
        </a>
        <a class="nav-link" href="{% url 'contact' %}" onclick="closeSidebar()">
          <i class="fas fa-phone"></i>Contact
        </a>
      </nav>
    </div>

    <!-- Overlay pour fermer le menu -->
    <div
      class="sidebar-overlay"
      id="sidebarOverlay"
      onclick="closeSidebar()"
    ></div>

    <!-- Messages -->
    {% if messages %}
    <div class="container mt-3">
      {% for message in messages %}
      <div
        class="alert alert-{{ message.tags }} alert-dismissible fade show"
        role="alert"
      >
        {{ message }}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    <main>{% block content %}{% endblock %}</main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <img src="{% static 'images/logo_institution.png' %}" alt="IRCC" class="footer-logo mb-2" />
            <h5 class="mt-2">IRCC</h5>
            <p>Immigration, Réfugiés et Citoyenneté Canada</p>
          </div>
          <div class="col-md-6 text-md-end">
            <p>&copy; 2024 IRCC. Tous droits réservés.</p>
            <p>
              <a href="{% url 'contact' %}">Contact</a> |
              <a href="{% url 'about' %}">À Propos</a>
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Video Overlay -->
    <div id="videoOverlay" class="video-overlay">
      <div class="video-container">
        <button class="video-close" onclick="closeVideo()">
          <i class="fas fa-times"></i>
        </button>
        <video id="promoVideo" controls autoplay muted>
          <source src="" type="video/mp4" />
          Votre navigateur ne supporte pas la lecture vidéo.
        </video>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Gestion des vidéos publicitaires
      let currentVideoIndex = 0;
      let videoTimeout = null;
      const videos = [
        "/static/videos/video1.mp4", // Première vidéo
        "/static/videos/video2.mp4", // Deuxième vidéo
      ];

      function showVideo(index) {
        if (index < videos.length) {
          const video = document.getElementById("promoVideo");
          const overlay = document.getElementById("videoOverlay");

          video.src = videos[index];
          overlay.style.display = "flex";

          video.onended = function () {
            closeVideo();
            if (index === 0) {
              // Afficher la deuxième vidéo après 3 secondes
              videoTimeout = setTimeout(() => {
                showVideo(1);
              }, 3000);
            }
          };
        }
      }

      function closeVideo() {
        const overlay = document.getElementById("videoOverlay");
        const video = document.getElementById("promoVideo");

        overlay.style.display = "none";
        video.pause();
        video.currentTime = 0;

        // Annuler le timeout si l'utilisateur ferme manuellement
        if (videoTimeout) {
          clearTimeout(videoTimeout);
          videoTimeout = null;
        }
      }

      // Afficher la première vidéo 3 secondes après le chargement de la page
      document.addEventListener("DOMContentLoaded", function () {
        if (window.location.pathname === "/") {
          setTimeout(() => showVideo(0), 3000);
        }
      });

      // Fermer la vidéo avec la touche Échap
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") {
          closeVideo();
        }
      });

      // Gestion du menu latéral mobile
      function toggleSidebar() {
        const sidebar = document.getElementById("mobileSidebar");
        const overlay = document.getElementById("sidebarOverlay");

        sidebar.classList.toggle("open");
        overlay.classList.toggle("show");

        // Empêcher le scroll du body quand le menu est ouvert
        if (sidebar.classList.contains("open")) {
          document.body.style.overflow = "hidden";
        } else {
          document.body.style.overflow = "";
        }
      }

      function closeSidebar() {
        const sidebar = document.getElementById("mobileSidebar");
        const overlay = document.getElementById("sidebarOverlay");

        sidebar.classList.remove("open");
        overlay.classList.remove("show");
        document.body.style.overflow = "";
      }

      // Fermer le menu avec la touche Échap
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") {
          closeSidebar();
        }
      });

      // Gestion du swipe pour ouvrir le menu
      let startX = 0;
      let startY = 0;
      let isSwipe = false;

      document.addEventListener("touchstart", function (e) {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        isSwipe = false;
      });

      document.addEventListener("touchmove", function (e) {
        if (!startX || !startY) return;

        const diffX = e.touches[0].clientX - startX;
        const diffY = e.touches[0].clientY - startY;

        // Détecter un swipe horizontal
        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
          isSwipe = true;
        }
      });

      document.addEventListener("touchend", function (e) {
        if (!isSwipe) return;

        const diffX = e.changedTouches[0].clientX - startX;
        const sidebar = document.getElementById("mobileSidebar");

        // Swipe vers la droite depuis le bord gauche
        if (diffX > 100 && startX < 50 && !sidebar.classList.contains("open")) {
          toggleSidebar();
        }

        startX = 0;
        startY = 0;
        isSwipe = false;
      });
    </script>

    {% block extra_js %}{% endblock %}
  </body>
</html>
